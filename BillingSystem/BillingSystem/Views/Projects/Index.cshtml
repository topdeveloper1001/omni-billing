@using BillingSystem.Common
@using BillingSystem.Models
@model ProjectsView

@{
    ViewBag.Title = "Projects View";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var currentticks = DateTime.Now.Ticks;
}

<div class="white-bg">
    <div class="row">
        <div class="col-sm-3">
            <div class="rowTable">
                <label><span class="mandatoryStar"></span>Select Facility:</label>
                <select id="ddlFacility"></select>
            </div>
        </div>
    </div>
    <div class="panel panel-default collapsecss ourcollapse">
        <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseProjectsAddEdit">
            <h4 class="panel-title collapseTitle">
                <span class="glyphicon glyphicon-plus-sign"></span>Add Projects
                <a class="btn btn-default btn-sm pull-right collapse-btn">
                    <span class="glyphicon glyphicon-chevron-down"></span>
                </a>
            </h4>
        </div>
        <div id="collapseProjectsAddEdit" class="panel-collapse collapse in">
            <div class="panel-body">
                <div class="base-color">
                    <div class="form">
                        @{Html.RenderPartial("~/Views/Projects/UserControls/_ProjectsAddEdit.cshtml", Model.CurrentProjects);}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="panel panel-default collapsecss ourcollapse bordertable">
        <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseProjectsList">
            <h4 class="panel-title collapseTitle">
                <span>
                    <img src="@Url.Content("~/images/list.png")" />
                </span>Projects List
                <a class="btn btn-default btn-sm pull-right collapse-btn">
                    <span class="glyphicon glyphicon-chevron-down"></span>
                </a>
            </h4>
        </div>
        <div id="collapseProjectsList" class="panel-collapse collapse in tableImg">
            <div class="panel-body">
                <div class="base-color" id="ProjectsListDiv">
                    @{Html.RenderPartial("~/Views/Projects/UserControls/_ProjectsList.cshtml", Model.ProjectsList);}
                </div>
            </div>
        </div>
    </div>
    @* Commented as per Ken's Specs as on 17 July, 2015 *@
    @*<div class="panel panel-default collapsecss ourcollapse bordertable">
            <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseProjectTargetsAddEdit">
                <h4 class="panel-title collapseTitle">
                    <span>
                        <img src="@Url.Content("~/images/list.png")" /></span> Project Expected Completion Percentages
                    <a class="btn btn-default btn-sm pull-right collapse-btn">
                        <span class="glyphicon glyphicon-chevron-down"></span>
                    </a>
                </h4>
            </div>
            <div id="collapseProjectTargetsAddEdit" class="panel-collapse collapse in tableImg">
                <div class="panel-body">
                    <div class="base-color" id="ProjectTargetsAddEditDiv">
                        @{Html.RenderPartial("~/Views/ProjectTargets/UserControls/_ProjectTargetsAddEdit.cshtml", Model.CurrentProjectTargets);}
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default collapsecss ourcollapse bordertable">
            <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseProjectTargetsList">
                <h4 class="panel-title collapseTitle">
                    <span>
                        <img src="@Url.Content("~/images/list.png")" /></span> Project Targets
                    <a class="btn btn-default btn-sm pull-right collapse-btn">
                        <span class="glyphicon glyphicon-chevron-down"></span>
                    </a>
                </h4>
            </div>
            <div id="collapseProjectTargetsList" class="panel-collapse collapse in tableImg">
                <div class="panel-body">
                    <div class="base-color partialContents" id="ProjectTargetsListDiv">
                        @{Html.RenderPartial("~/Views/ProjectTargets/UserControls/_ProjectTargetsList.cshtml", Model.ProjectTargetList);}
                    </div>
                </div>
            </div>
        </div>*@
    <div class="panel panel-default collapsecss ourcollapse">
        <div class="panel panel-default collapsecss ourcollapse bordertable">
            <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseProjectTasksAddEdit">
                <h4 class="panel-title collapseTitle">
                    <span class="glyphicon glyphicon-plus-sign"></span>Project Tasks
                    <a class="btn btn-default btn-sm pull-right collapse-btn">
                        <span class="glyphicon glyphicon-chevron-down"></span>
                    </a>
                </h4>
            </div>
            <div id="collapseProjectTasksAddEdit" class="panel-collapse collapse in">
                <div class="panel-body">
                    <div class="base-color">
                        <div class="form">
                            @{Html.RenderPartial("~/Views/ProjectTasks/UserControls/_ProjectTasksAddEdit.cshtml", Model.CurrentProjectTasks);}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    <div class="panel panel-default collapsecss ourcollapse bordertable">
        <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseProjectTasksList">
            <h4 class="panel-title collapseTitle">
                <span>
                    <img src="@Url.Content("~/images/list.png")" />
                </span>Project Tasks List
                <a class="btn btn-default btn-sm pull-right collapse-btn">
                    <span class="glyphicon glyphicon-chevron-down"></span>
                </a>
            </h4>
        </div>
        <div id="collapseProjectTasksList" class="panel-collapse collapse in tableImg">
            <div class="col-sm-3">
                <div class="rowTable">
                    <label>Responsible User: </label>
                    <select id="ddlUsers" onchange="RebindProjectTasks();"></select>
                </div>
            </div>
            <div class="panel-body">
                <div class="base-color partialContents" id="ProjectTasksListDiv">
                    @*@{Html.RenderPartial("~/Views/ProjectTasks/UserControls/_ProjectTasksList.cshtml", Model.ProjectTaskList);}*@
                </div>
            </div>
        </div>
</div>
    <div class="panel panel-default collapsecss ourcollapse bordertable">
        <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseProjectTaskTargetAddEdit">
            <h4 class="panel-title collapseTitle">
                <span>
                    <img src="@Url.Content("~/images/list.png")" />
                </span>Add Task Target
                <a class="btn btn-default btn-sm pull-right collapse-btn">
                    <span class="glyphicon glyphicon-chevron-down"></span>
                </a>
            </h4>
        </div>
        <div id="collapseProjectTaskTargetAddEdit" class="panel-collapse collapse in tableImg">
            <div class="panel-body">
                <div class="base-color" id="ProjectTaskTargetAddEditDiv">
                    @{Html.RenderPartial("~/Views/ProjectTaskTargets/UserControls/_ProjectTaskTargetsAddEdit.cshtml", Model.CurrentProjectTaskTarget);}
</div>
            </div>
        </div>
    </div>

    <div class="panel panel-default collapsecss ourcollapse bordertable">
        <div class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#collapseProjectTaskTargetList">
            <h4 class="panel-title collapseTitle">
                <span>
                    <img src="@Url.Content("~/images/list.png")" />
                </span>Project Task Targets List
                <a class="btn btn-default btn-sm pull-right collapse-btn">
                    <span class="glyphicon glyphicon-chevron-down"></span>
                </a>
            </h4>
        </div>
        <div id="collapseProjectTaskTargetList" class="panel-collapse collapse in tableImg">
            <div class="panel-body">
                <div class="base-color partialContents" id="ProjectTaskTargetsListDiv">
                </div>
            </div>
        </div>
    </div>

    <div class="clear"></div>
    <input id="hfLoggedInFacility" value="@Model.FacilityId" type="hidden" />
</div>
<script src="~/Scripts/Projects/Projects.js?@Helpers.CurrentAssemblyTicks"></script>
<script src="~/Scripts/ProjectTargets/ProjectTargets.js?@Helpers.CurrentAssemblyTicks"></script>
<script src="~/Scripts/ProjectTasks/ProjectTasks.js?@Helpers.CurrentAssemblyTicks"></script>
<script src="~/Scripts/ProjectTaskTargets/ProjectTaskTargets.js?@Helpers.CurrentAssemblyTicks"></script>
<script src="~/Scripts/Common/confirmEvents.js?@Helpers.CurrentAssemblyTicks"></script>